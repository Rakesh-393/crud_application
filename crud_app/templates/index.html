{% extends "base.html" %}
{% block title %}Home | CRUD App{% endblock title %} 
{% block content %}



  <h3 class="fw-bold">Welcome to CRUD Application</h3>
  <table class="table table-hover">
    <thead>
      
        <tr>
            <td>Name</td>
            <td>Emails</td>
            <td>Age</td>
            <td></td>
        </tr>
          </thead>
          {% for i in students %}
        <tr>
            
            <td>{{i.name}}</td>
            <td>{{i.email}}</td>
            <td>{{i.age}}</td>
             <td class="text-center">
          <!-- Edit Icon -->

          <button class="btn btn-sm btn-outline-primary me-2" data-bs-toggle="modal" data-bs-target="#updateStudentModal{{i.id}}" title="Edit">
             <i class="bi bi-pencil-square"></i>
         </button>

          <!-- Delete Icon -->
          <a href="{% url 'delete_student' i.id %}" class="btn btn-sm btn-outline-danger" title="Delete"  onclick="return confirm('Are you sure you want to delete this student?');">
            <i class="bi bi-trash"></i>
          </a>
        </td>
            
        </tr>
        
        <div class="modal fade" id="addStudentModal" tabindex="-1" aria-labelledby="addStudentModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <form method="POST" action="{% url 'add_student' %}">
        {% csrf_token %}
        <div class="modal-header">
          <h5 class="modal-title" id="addStudentModalLabel">Add New Student</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>

        <div class="modal-body">
          <div class="mb-3">
            <label class="form-label">Name</label>
            <input type="text" name="name" class="form-control" required>
          </div>
          <div class="mb-3">
            <label class="form-label">Email</label>
            <input type="email" name="email" class="form-control" required>
          </div>
          <div class="mb-3">
            <label class="form-label">Age</label>
            <input type="number" name="age" class="form-control" required>
          </div>
        </div>

        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          <button type="submit" class="btn btn-primary">Add Student</button>
        </div>
      </form>
    </div>
  </div>
</div>
<div class="modal fade" id="updateStudentModal{{i.id}}" tabindex="-1" aria-labelledby="updateStudentModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <form method="POST" action="{% url 'update_student' i.id %}">
        {% csrf_token %}
        <div class="modal-header">
          <h5 class="modal-title" id="addStudentModalLabel">Add New Student</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>

        <div class="modal-body">
          <div class="mb-3">
            <label class="form-label">Name</label>
            <input type="text" name="name" class="form-control" value="{{ student.name }} " required>
          </div>
          <div class="mb-3">
            <label class="form-label">Email</label>
            <input type="email" name="email" class="form-control" value="{{ student.email }} " required>
          </div>
          <div class="mb-3">
            <label class="form-label">Age</label>
            <input type="number" name="age" class="form-control" value="{{ student.age }} " required>
          </div>
        </div>

        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          <button type="submit" class="btn btn-primary">Update Student</button>
        </div>
      </form>
    </div>
  </div>
</div>
{% endfor %}

  
  </table>
  <div class="text-end mt-4">
    <button class="btn btn-outline-primary" data-bs-toggle="modal" data-bs-target="#addStudentModal">
      <i class="bi bi-person-plus"></i> Add Student
    </button>
  </div>


{% comment %} modal for add student {% endcomment %}

<!-- Add Student Modal -->




{% endblock content %}